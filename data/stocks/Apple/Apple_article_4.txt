Surprising news has just come out of Omaha, Nebraska. Warren Buffett sold half of Berkshire Hathaway's monster stake in Apple (NASDAQ: AAPL), adding tens of billions of dollars to the company's cash heap. At the end of last quarter, Berkshire Hathaway had $277 billion in cash and equivalents, giving it one of -- if not the -- world's largest cash reserves for an individual company.Berkshire's Apple investment was worth $84 billion at the end of the second quarter, down from $150 billion a few years ago. What is Buffett planning to do with Berkshire's cash? Why has he soured on Apple? And should you do the same for your portfolio? Let's take a closer look and find out.Apple reported earnings on Aug. 1 for the second calendar quarter of 2024. Its results have looked similar for the last few quarters. Hardware revenue has stagnated, with iPhone, iPad, and Wearables revenue all down in the first nine months of this Apple fiscal year versus the prior year. The only bright spot was the Mac, but that was a slight increase in sales.On a positive note, Apple services' revenue continues to climb. Revenue for the segment hit $71 billion over the last nine months, up from $63 billion in the same period a year prior. Services are a higher-margin business for Apple that comes from App Store fees, advertisements, Apple TV, and other software programs that it sells to customers. This has been the story for Apple for a long time. Even though Apple is not growing hardware sales, these new software products will drive growth for the company.Looking holistically, Apple's sales have not gone anywhere for a while. After the COVID-19 pandemic boost, revenue has been flat over trailing 12-month periods for a few years. In fact, revenue is still down from its peak at the end of 2022. One key reason for this is China. The region is important for Apple and has a weak consumer economy right now. Revenue in the first nine months of this fiscal year was $52 billion in China compared to $57.5 billion a year ago.Apple's services business looks like all sunshine and rainbows, driving margins higher and higher. However, a good chunk of Apple's services revenue is simply a distribution payment from Google Search to be the default search engine on Safari. Apple reportedly receives over $20 billion a year from Alphabet for this distribution agreement, which comes at close to 100% profit margins. Analysts estimate that this payment may make up 15% of Apple's consolidated earnings power.Now, there is the risk this payment deal will come apart. A judge just ruled that Google Search's default distribution agreements are monopolistic, siding in the U.S. government in its case vs. Alphabet. This could be bad news for Alphabet, but it is even worse news for Apple. If it loses this lucrative distribution deal, Apple will see an estimated 15% of its profits evaporate overnight. And that is alongside stagnating top-line growth. The one gem of its business -- services -- could turn into a dud within a few years if the courts rule against Apple.AAPL PE Ratio data by YChartsEven though Apple's revenue is stagnating and its high-profit Google distribution payment is at risk of imploding, the stock was at an all-time high at the end of the second quarter. It is no surprise, then, to see Buffett selling some of his position.Today, the stock is a tad lower due to the broad market downturn. However, it still trades at an expensive-looking price-to-earnings ratio (P/E) of 31.5. That is much higher than the S&P 500 average for a company with stagnating sales. Buffett likes to buy businesses closer to a P/E of 10, which is when he started buying Apple shares eight years ago.He clearly still likes the business -- it is Berkshire Hathaway's largest equity holding -- but the stock is very expensive at these prices. A low-growth stock with uncertainty around a large chunk of its profits and cash flow (the Google antitrust case) does not deserve to trade at over 30x earnings. Even Apple. Buffett understands this, which is why he is trimming his position. He would rather sit in short-term U.S. treasury bills that pay him a guaranteed 5% interest rate every year.If you hold Apple, this doesn't mean you should immediately sell your position. But if it is an outsize position in your portfolio like it was at Berkshire Hathaway, it might be smart to diversify your holdings along with Buffett.Before you buy stock in Apple, consider this:The Motley Fool Stock Advisor analyst team just identified what they believe are the 10 best stocks for investors to buy now… and Apple wasn’t one of them. The 10 stocks that made the cut could produce monster returns in the coming years.Consider when Nvidia made this list on April 15, 2005... if you invested $1,000 at the time of our recommendation, you’d have $641,864!*Stock Advisor provides investors with an easy-to-follow blueprint for success, including guidance on building a portfolio, regular updates from analysts, and two new stock picks each month. The Stock Advisor service has more than quadrupled the return of S&P 500 since 2002*.See the 10 stocks »*Stock Advisor returns as of August 6, 2024Suzanne Frey, an executive at Alphabet, is a member of The Motley Fool's board of directors. Brett Schafer has positions in Alphabet. The Motley Fool has positions in and recommends Alphabet, Apple, and Berkshire Hathaway. The Motley Fool has a disclosure policy.Warren Buffett Just Trimmed His Apple Stock. Should You? was originally published by The Motley Fool